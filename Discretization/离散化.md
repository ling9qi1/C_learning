# ç¦»æ•£åŒ–

- å°†åŸæ¥è¾ƒå¤§çš„æ•°æ ¹æ®ä»–ä»¬çš„ç›¸å¯¹å¤§å°å…³ç³»è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œï¼ˆæ˜ å°„åçš„æ•°ä¹Ÿæ»¡è¶³ç›¸åŒçš„ç›¸å¯¹å¤§å°å…³ç³»ï¼‰ç¼©å°ä»–ä»¬çš„é—´è·ï¼Œå¯¹äºæ ‘çŠ¶æ•°ç»„ï¼Œå¹¶æŸ¥é›†ç­‰é‡åˆ°è¾ƒå¤§çš„æ•°å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•   
- ç¦»æ•£åŒ–å¤„ç†ä¸»è¦é€šè¿‡ `lower_bound()` æˆ– `upper_bound()` æ¥å®ç°ï¼Œç”±äº `lower_bound()` æ˜¯æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äº `a[i]` çš„æ•°ï¼Œæ‰€ä»¥ç¦»æ•£åŒ–åçš„èŒƒå›´æ˜¯ $[0 , len - 1]$ `upper_bound()` æ˜¯æ‰¾ç¬¬ä¸€ä¸ªå¤§äº `a[i]` çš„æ•°ï¼Œå…¶å¯¹åº”çš„èŒƒå›´æ˜¯ $[1, len]$ ï¼Œä¸‹é¢æ¥çœ‹çœ‹è¿™ä¸¤ç§ä½¿ç”¨çš„ä¸åŒä¹‹å¤„


```
#include<iostream>
#include<cstdio>
#include<cstring>
#include <map>
#include <vector>
#include<algorithm>
using namespace std;

int n = 5;	//åŸåºåˆ—é•¿åº¦
int a[] = {1099, 99, 1099, 1, 10000};//åŸåºåˆ—
int len;	//å»é‡åçš„åºåˆ—é•¿åº¦
int b[1005];//åŸåºåˆ—çš„å‰¯æœ¬(lower_boud())
int c[1005];//åŸåºåˆ—çš„å‰¯æœ¬(upper_bound())

int main()
{
    //ä½¿ç”¨lower_bound()
	for (int i = 0; i < n; ++i) {
        b[i] = a[i];
	}
	sort(b, b + n);
	len = unique(b, b + n) - b;
	for (int i = 0; i < n; ++i) {
        a[i] = lower_bound(b, b + len, a[i]) - b;
	}
		for (int i = 0; i < n; ++i) {
        cout << a[i] << " ";
	}
    //è¾“å‡º : 2 1 2 0 3

	cout << endl;

    //ä½¿ç”¨upper_bound()
	for (int i = 0; i < n; ++i) {
        c[i] = a[i]; // å…¶å®æ­¤a[i]éå½¼a[i]ï¼Œä»–å·²ç»æ˜¯ç¦»æ•£åŒ–ä¹‹åçš„ç»“æœäº†ï¼Œä½†ç”±äºç¦»æ•£åŒ–ä¹‹åçš„ç»“æœè¯¥ç›¸ç­‰çš„ç›¸ç­‰ï¼Œè¯¥å¤§çš„å¤§ï¼Œè¯¥å°çš„å°ï¼Œå„æ•°ä¹‹é—´çš„ç›¸å¯¹å¤§å°å…³ç³»æ˜¯æ²¡å˜çš„ï¼Œ
        //æ‰€ä»¥å†æ¬¡ä½¿ç”¨å®ƒè¿›è¡Œupper_boundçš„ç¦»æ•£åŒ–æ“ä½œä¸ç›´æ¥ç”¨åŸa[i]æ•°ç»„è¿›è¡Œç¦»æ•£åŒ–æ“ä½œç»“æœæ˜¯ä¸€æ ·çš„
	}
    sort(c, c + n);
	len = unique(c, c + n) - c;
	for (int i = 0; i < n; ++i) {
        a[i] = upper_bound(c, c + len, a[i]) - c;
	}
	for (int i = 0; i < n; ++i) {
        cout << a[i] << " ";
	}
    //è¾“å‡º : 3 2 3 1 4

	return 0;
}

```


## é¢˜ç›® ï¼š æ™ºä¹ƒçš„è·³è·ƒæ’åº

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/101918/E


ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨åªäº¤æ¢ç›¸é‚»å…ƒç´ çš„å‰æä¸‹ï¼Œå¯ä»¥å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œå®Œæ•´çš„æ’åºæ“ä½œç°åœ¨åªèƒ½äº¤æ¢ä¸‹æ ‡æˆ–è€…å€¼çš„å·®å€¼ä¸º $k$ çš„å…ƒç´ ï¼Œå³å¯¹ $i,j$ ï¼Œå¦‚æœ $âˆ£iâˆ’jâˆ£=k$ æˆ–è€… $âˆ£a i âˆ’a jâˆ£=k$ ï¼Œåˆ™å¯äº¤æ¢  $a i$ ï¼Œ $a j$ çš„å€¼

å‡è®¾äº¤æ¢æ˜¯è¿ç»­è¿›è¡Œçš„ï¼Œä½ å¯ä»¥æ— é™æ¬¡çš„æ‰§è¡Œäº¤æ¢æ“ä½œï¼Œæ¯ä¸€æ¬¡äº¤æ¢æ“ä½œå»ºç«‹åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šï¼Œç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $ğ‘$ çš„æ•°ç»„ï¼Œæ•°ç»„çš„å€¼äº’ä¸ç›¸åŒï¼Œé—®æ˜¯å¦èƒ½åœ¨è¿™ä¸ªé™åˆ¶æ¡ä»¶ä¸‹å®ç°å‡åºæ’åº

## è¾“å…¥æè¿°

ç¬¬ä¸€è¡Œè¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•° $N,k(1â‰¤Nâ‰¤10^5,1â‰¤kâ‰¤10^9)$ 

æ¥ä¸‹æ¥ä¸€è¡Œè¾“å…¥Nä¸ªäº’ä¸ç›¸åŒçš„æ­£æ•´æ•° $a i (1â‰¤a i â‰¤10^9)$

## è¾“å‡ºæè¿°

å¦‚æœå¯ä»¥ï¼Œè¯·è¾“å‡º $"Yes"$ ï¼Œå¦åˆ™è¾“å‡º $"No"$

---

### ç¤ºä¾‹1

è¾“å…¥  
6 5  
3 2 11 4 5 1

è¾“å‡º  
No

è¯´æ˜  
æ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½æ’åºæˆåŠŸ

---
### ç¤ºä¾‹2

è¾“å…¥  
6 5  
3 2 8 4 5 1

è¾“å‡º  
Yes

è¯´æ˜  
å› ä¸º $8âˆ’3=5$ ï¼Œæ‰€ä»¥å…ˆäº¤æ¢ $3$ å’Œ $8$ ï¼Œæ•°ç»„å˜ä¸º $[8,2,3,4,5,1]$ 
ç„¶åç”±äº $ğ‘1=8$ ï¼Œ $ğ‘6=1$ ï¼Œ $6âˆ’1=5$ ï¼Œ$a 1=8$ ï¼Œ $a 6 =1$ ï¼Œ $6âˆ’1=5$ äº¤æ¢$ğ‘1$ ï¼Œ $a6$ ï¼Œæ•°ç»„å˜ä¸º $[1,2,3,4,5,8]$ ç¬¦åˆé¢˜ç›®è¦æ±‚

---
### ç¤ºä¾‹3
è¾“å…¥  
1 1  
1

è¾“å‡º  
Yes  

è¯´æ˜  
åªæœ‰ä¸€ä¸ªæ•°å­—æ—¶ä¸éœ€è¦äº¤æ¢ï¼Œé»˜è®¤å°±æ˜¯æœ‰åºçš„

---
### ç¤ºä¾‹4
è¾“å…¥  
3 2  
3 1 2

è¾“å‡º  
No

è¯´æ˜  
å¦‚æœ $3$ å…ˆå’Œ $1$ äº¤æ¢ï¼Œé‚£ä¹ˆäº¤æ¢å $3$ æ°¸è¿œå¯ä¸å¯èƒ½å’Œ $2$ äº¤æ¢åˆ°æ­£ç¡®çš„ç½®å¦‚æœ $3$ å…ˆå’Œ $2$ äº¤æ¢ï¼Œé‚£ä¹ˆäº¤æ¢å $1$ å’Œ $2$ æ°¸è¿œä¹Ÿä¸å¯èƒ½äº¤æ¢åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œæ•…æ— è§£


![alt text](image.png)


---

## ACä»£ç 
```
#include <iostream>
#include <algorithm>
#include <iomanip>
#include <cstring>
#include <vector>
#include <map>
using namespace std;
typedef long long LL;
const LL MAX = 1e5 + 100;

int n, k, a[MAX], b[MAX], fa[MAX]; //æ•°ç»„aæ¥è¿›è¡Œæ“ä½œï¼Œæ•°ç»„bæ˜¯æ’åºåçš„ï¼Œç”¨æ¥ä¸aå¯¹ç…§
vector<int> v1[MAX], v2[MAX];

//ç¦»æ•£åŒ–å¤„ç†
struct ID {
    map<int, int> mp;
    int tot;
    //è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªé‡è½½çš„ operator() å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•° xï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ã€‚
    //åœ¨ C++ ä¸­ï¼Œoperator() æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…è®¸å¯¹è±¡åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ª ID ç±»å‹çš„å¯¹è±¡ idï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ id(x) æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚
    int operator()(int x) {
        auto it = mp.find(x);
        if (it == mp.end()) {
            return -1;
        }
        return it->second;
    }
    //å¯¹æ•°ç»„ä¸­çš„æ•°å­—è¿›è¡Œç¼–å·ï¼Œå³ç¦»æ•£åŒ–å¤„ç†ï¼Œé‡å¤çš„å¯ç›´æ¥è·³è¿‡ï¼Œå› ä¸ºçœŸæ­£çš„ç¦»æ•£åŒ–å¤„ç†ï¼ˆå°†æ•°ç»„aå’Œæ•°ç»„bä¸­çš„æ•°å­—ä¸€ä¸€æ˜ å°„ï¼‰æ˜¯ç”¨operatorå‡½æ•°æ¥æ‰§è¡Œçš„
    void addData(int x) {
        if (mp.find(x) == mp.end()) {
            mp[x] = ++tot;
        }
    }
}id;

//å¹¶æŸ¥é›†ï¼Œå°† |ai - aj| = k çš„æ•°å­—åˆå¹¶ï¼Œå³æŸ“æˆåŒä¸€ç§é¢œè‰²
int Find(int x) {
    return x == fa[x] ? x : fa[x] = Find(fa[x]);
}

void union_(int x, int y) {
    int xx = Find(x);
    int yy = Find(y);
    fa[xx] = yy;
}


int main() {
#ifdef JiuQi
    freopen("text.txt", "r", stdin);
#endif // JiuQi
    ios::sync_with_stdio(false);
    cin.tie(0), cout.tie(0);

    cin >> n >> k;
    for (int i = 1; i <= n; ++i) {
        cin >> a[i];
        b[i] = a[i];
        fa[i] = i;
    }
    sort(b + 1, b + 1 + n);
    for (int i = 1; i <= n; ++i) {
        id.addData(a[i]);  //å¯¹æ•°å­—è¿›è¡Œæ˜ å°„ï¼Œæ‰¾åˆ°ä¸åŒçš„æ•°å­—å¯¹åº”çš„ç¼–å·
    }
    //è¿›è¡ŒæŸ“è‰²
    for (int i = 1; i <= n; ++i) {
        int x = id(a[i]);
        int y = id(a[i] + k);
        int z = id(a[i] - k);
        if (y != -1) {
            unit(x, y);
        }
        if (z != -1) {
            unit(x, z);
        }
    }
    //å°† |i - j| = k çš„æ•°å­—åˆ†ä¸ºä¸€ç»„ï¼Œä½¿ç”¨äºŒç»´çš„vectorï¼Œç”¨ (i - 1) % k æ¥ç¡®å®šä¸€ç»´ä¸‹æ ‡ï¼Œå‚¨å­˜çš„æ˜¯æ•°å­—å¯¹åº”çš„ç¼–å·çš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œæ‰€ä»¥å¦‚æœ |ai - aj| = kï¼Œå³è¿™ä¸¤ä¸ªå€¼å¯¹åº”çš„ç¼–å·çš„æ ¹èŠ‚ç‚¹ç›¸åŒï¼Œç›¸å½“äºè¿™ä¸¤ä¸ªå€¼ç›¸åŒã€‚ï¼ˆå› ä¸ºå¯äº’æ¢ï¼Œäº’æ¢åaæ•°ç»„ä¸­çš„è¿™ä¸ªå€¼å¯ä¸bæ•°ç»„ä¸­çš„è¿™ä¸ªå€¼ç›¸åŒã€‚ï¼‰
    for (int i = 1; i <= n; ++i) {
        v1[(i - 1) % k].push_back(Find(id(a[i])));
        v2[(i - 1) % k].push_back(Find(id(b[i])));
    }

    for (int i = 0; i < min(n, k); ++i) {
        sort(v1[i].begin(), v1[i].end());
        sort(v2[i].begin(), v2[i].end()); //è¿™ä¸¤è¡Œä»£ç è‚¯å®šæœ‰é—®é¢˜ï¼ï¼ï¼ 
        if (v1[i] != v2[i]) {
            cout << "No" << endl;
            return 0;
        }
    }
    cout << "Yes" << endl;
    return 0;
}
```
---

$hack$ ä»£ç   
4 2  
4 1 5 3  
è¾“å‡º åº”è¯¥æ˜¯ $No$ , ä½†è¿™æ®µä»£ç è¾“å‡ºå´æ˜¯ $Yes$  
å¦‚æœç”¨é¢˜è§£ä¸­çš„æ–¹æ³•ï¼Œæœ€å¼€å§‹åˆ†ç»„ä¸º `4 5` `1 3` ï¼Œç„¶åå†…éƒ¨ä»å°åˆ°å¤§æ’åºï¼Œå·²æ˜¯æ’å¥½çš„ï¼Œç„¶åï¼Œ`1 3 5` æ˜¯åŒä¸€ç§é¢œè‰²ï¼Œå¯äº’ç›¸äº¤æ¢ï¼Œä½†æ— è®ºå¦‚ä½•äº¤æ¢ï¼Œ `4` éƒ½åœ¨ç¬¬ä¸€ä¸ªï¼Œå˜åŠ¨ä¸äº†çš„ï¼Œæ‰€ä»¥æœ¬åº”è¯¥æ˜¯ $No$ çš„ ï¼Œä¸ºä»€ä¹ˆæŒ‰ç…§é¢˜è§£çš„æ€è·¯è¾“å‡ºçš„ç¡®ä¸å¯¹å‘¢ï¼Ÿ  
æ˜¯å› ä¸ºåœ¨ $v1$ ï¼Œ$v2$ è¿™ä¸¤ä¸ªæ•°ç»„ä¸­å‚¨å­˜çš„æ˜¯åŸæ•°ç»„çš„æ˜ å°„çš„æ ¹èŠ‚ç‚¹ï¼Œæœ¬æ¥æ˜ å°„å°±å·²ç»æ²¡æœ‰æ­£ç¡®çš„ç›¸å¯¹å¤§å°å…³ç³»ï¼Œä½†å› ä¸ºæœ‰æ’å¥½åºçš„ $b$ æ•°ç»„å’Œ $v2$ æ•°ç»„ï¼Œæ‰€ä»¥é—®é¢˜ä¸å¤§ï¼Œä½†åˆå› ä¸ºä½ ä¸çŸ¥é“æ ¹èŠ‚ç‚¹ä»–æ‰€å¯¹åº”çš„åŸæ•°å­—çš„å¤§å°ï¼Œå°±æ¯”å¦‚è¯´è¿™æ®µä»£ç ï¼Œæœ‰å¯èƒ½ `1 3 5` éƒ½æ˜¯ä»¥ `1` è¿™ä¸ªæ•°å­—å‚¨å­˜åœ¨ `v1 v2` æ•°ç»„ä¸­çš„ï¼Œæ‰€ä»¥æ’åºåï¼Œ`v1 v2` çš„ç»“æœéƒ½æ˜¯ `1 4 `  `4 4`ï¼Œè‡ªç„¶å°±è¾“å‡º $Yes$ äº†å‘—ã€‚  
é‚£æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼Œæ€ä¹ˆä¿®æ”¹å‘¢ï¼Ÿ  
ä»–çš„æ€è·¯æ²¡æœ‰é—®é¢˜ï¼Œä½†ä»–å†™ä»£ç çš„é¡ºåºè·Ÿä»–çš„æ€è·¯å´ä¸æ˜¯ä¸€ä¸ªé¡ºåºï¼Œä»–å‰é¢å¯¹ç¼–å·è¿›è¡Œunionçš„æ“ä½œæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†ä¹‹åå°±æœ‰é—®é¢˜äº†ï¼Œå°¤å…¶æ˜¯æœ€åçš„é‚£ä¸¤ä¸ª `sort()` ä¸åº”è¯¥æ”¾åœ¨è¿™å„¿ï¼Œä»–åœ¨è¿˜æœªè¿›è¡Œç¼–å·çš„æ—¶å€™ï¼ŒåŠå…¨éƒ¨éƒ½æ˜¯åŸæ•°å­—çš„æ—¶å€™ï¼Œå°±åº”è¯¥æŒ‰ç…§ $|ai - aj| = k$ æ¥è¿›è¡Œåˆ†ç»„ï¼Œç„¶åç«‹é©¬è¿›è¡Œæ’åºï¼Œå¯é—®é¢˜åˆå‡ºç°äº†ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æŠŠç»„åˆ†äº†ï¼ŒæŠŠåºæ’äº†ï¼Œå°±ä¸èƒ½è¾¹åˆ†ç»„æ’åºè¾¹æŠŠæ ¹èŠ‚ç‚¹å­˜è¿›æ¥ $v1 ï¼Œv2$ äº†ï¼Œå°±æ²¡æ³•åˆ©ç”¨æ˜¯å¦ $v1[i] == v2[i]$ æ¥å¿«é€Ÿåˆ¤æ–­äº†ï¼Œæƒ³å•¥å‘¢ï¼Œè¿˜æƒ³è¿™ä¹ˆå¹²å‘¢ï¼Œåé¢éƒ½å¾—æ”¹ã€‚ä¹‹åå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªåˆ¤æ–­å…¶æ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒï¼Œå½“ç„¶è¯´çš„æ˜¯ç¼–å·çš„æ ¹èŠ‚ç‚¹ï¼Œæ¯•ç«ŸåŠç¦»æ•£åŒ–è¿˜æ˜¯è¦å¤„ç†çš„ã€‚